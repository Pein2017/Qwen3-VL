targets:
  - name: bbu_dense
    dataset: bbu
    train_jsonl: data_new_schema/bbu_full_1024_poly_new_schema/train.jsonl
    val_jsonl: data_new_schema/bbu_full_1024_poly_new_schema/val.jsonl
    template: target_dense_bbu
    mode: dense
    ratio: 1.0
  - name: rru_dense
    dataset: rru
    train_jsonl: data_new_schema/rru_full_1024_poly_new_schema/train.jsonl
    val_jsonl: data_new_schema/rru_full_1024_poly_new_schema/val.jsonl
    template: target_dense_rru
    mode: dense
    ratio: 1.0

sources:
  # LVIS auxiliary detection dataset
  - name: lvis
    dataset: lvis
    train_jsonl: public_data/lvis/rescale_32_768_poly_max_12/train.jsonl
    ratio: 0.1
    template: source_dense
    mode: dense
    sample_without_replacement: true
    max_objects_per_image: 20
    augmentation_enabled: false
    curriculum_enabled: false

  # BBU summary mode for regularization
  - name: bbu_summary
    dataset: bbu
    train_jsonl: data_new_schema/bbu_full_1024_poly_new_schema/train.jsonl
    ratio: 0.1
    template: summary_bbu
    mode: summary
    sample_without_replacement: true
    augmentation_enabled: true
    curriculum_enabled: false

  # RRU summary mode for regularization
  - name: rru_summary
    dataset: rru
    train_jsonl: data_new_schema/rru_full_1024_poly_new_schema/train.jsonl
    ratio: 0.1
    template: summary_rru
    mode: summary
    sample_without_replacement: true
    augmentation_enabled: true
    curriculum_enabled: false

  # Text-only chat source to preserve language capacity.
  # Expect a merged COIG-CQIA JSONL with messages only (no images/objects).
  - name: lang_chat
    dataset: chat
    train_jsonl: public_data/coig_cqia/coig_cqia_merged.jsonl
    ratio: 0.1
    template: chatml
    mode: dense
    sample_without_replacement: true
    augmentation_enabled: false
    curriculum_enabled: false
