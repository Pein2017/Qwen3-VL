targets:
  - name: bbu_dense
    dataset: bbu
    train_jsonl: data_new_schema/bbu_full_1024/train.jsonl
    val_jsonl: data_new_schema/bbu_full_1024/val.jsonl
    template: target_dense_bbu
    mode: dense
    ratio: 1.0

  - name: rru_dense
    dataset: rru
    train_jsonl: data_new_schema/rru_full_1024_poly/train.jsonl
    val_jsonl: data_new_schema/rru_full_1024_poly/val.jsonl
    template: target_dense_rru
    mode: dense
    ratio: 1.0

  - name: bbu_summary
    dataset: bbu
    train_jsonl: data_new_schema/bbu_full_1024/train.jsonl
    val_jsonl: data_new_schema/bbu_full_1024/val.jsonl
    template: summary_bbu
    mode: summary
    ratio: 0.2

  - name: rru_summary
    dataset: rru
    train_jsonl: data_new_schema/rru_full_1024_poly/train.jsonl
    val_jsonl: data_new_schema/rru_full_1024_poly/val.jsonl
    template: summary_rru
    mode: summary
    ratio: 0.2

sources:
  # LVIS auxiliary detection dataset
  - name: lvis
    dataset: lvis
    train_jsonl: public_data/lvis/rescale_32_768_poly_max_12/train.jsonl
    ratio: 0.2
    template: source_dense
    mode: dense
    sample_without_replacement: true
    max_objects_per_image: 20
    augmentation_enabled: false
    curriculum_enabled: false

  # Text-only chat source to preserve language capacity.
  # Expect a merged COIG-CQIA JSONL with messages only (no images/objects).
  - name: lang_chat
    dataset: chat
    train_jsonl: public_data/coig_cqia/coig_cqia_merged.jsonl
    ratio: 0.15
    template: chatml
    mode: dense
    sample_without_replacement: true
    augmentation_enabled: false
    curriculum_enabled: false

  # Irrelevant negative pool (dense mode) for regularization.
  - name: irrelevant_dense
    dataset: lvis
    train_jsonl: data/irrelevant_summary/train.jsonl
    ratio: 0.1
    template: source_dense
    mode: dense
    sample_without_replacement: true
    augmentation_enabled: false
    curriculum_enabled: false

  # Irrelevant negative pool (summary mode); prompt template alternates in FusionCaptionDataset.
  - name: irrelevant_summary
    dataset: bbu
    train_jsonl: data/irrelevant_summary/train.jsonl
    ratio: 0.1
    template: summary_bbu
    mode: summary
    sample_without_replacement: true
    augmentation_enabled: true
    curriculum_enabled: false
