extends:
  - ../../base.yaml
  - ../../components/global/max_length_16000.yaml
  - ../../components/tuner/dora_full.yaml
  - ../../components/training/sft_defaults.yaml
  - ../../components/training/grpo_summary.yaml
  - ../../components/data/loader_defaults.yaml
  - ../../components/prompts/summary_runtime_bbu.yaml
  - ../../components/custom/common_fusion.yaml
  - ../../components/custom/assistant_prefix.yaml
  - ../../components/custom/summary_mode.yaml
  - ../../components/custom/augmentation_grpo_summary.yaml
  - ../../components/deepspeed/zero3.yaml
  - ../../components/rlhf/summary_grpo.yaml

model:
  model: null

custom:
  val_sample_limit: 200
  # Optional: CHORD-style SFT mixing for GRPO (supervised fallback signal).
  # Uses the same (fusion) training dataset stream as expert data.
  grpo:
    chord:
      enabled: true
      # Keep SFT micro-batch minimal; tuned for GPUs that can only backprop one sample per device.
      sft_per_device_train_batch_size: 1
      # Conservative constant mu after warmup: ramps to 0.05 then stays.
      mu_warmup_steps: 100
      mu_decay_steps: 0
      mu_peak: 0.05
      mu_valley: 0.05
      enable_phi_function: false
